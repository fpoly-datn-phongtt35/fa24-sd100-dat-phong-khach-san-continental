@using Domain.DTO.RoomBookingDetail
@using View.Views.Shared.Helper
@model Domain.DTO.RoomBookingDetail.RoomBookingDetailResponse

@{
    ViewData["Title"] = "Thông tin chi tiết đặt phòng";
    //var roomBookingDetail = (RoomBookingDetailResponse)ViewBag.roomBookingDetail;
}

<h4>Thông tin chi tiết đặt phòng </h4>

<p class="button-group">
    <button id="checkInButton" data-id="@Model.Id" class="btn btn-primary">
        Check-In
    </button>
    <button id="checkOutButton" data-id="@Model.Id" class="btn btn-danger">
        Check-Out
    </button>
</p>


<div class="row">
    <div class="col-md-4">
        <div class="form-group mb-3">
            <label class="control-label1">Phòng</label>
            <p class="form-control-static bordered-text">@Model.RoomName</p>
        </div>

        <div class="form-group mb-3">
            <label class="control-label1">Ngày nhận</label>
            <p class="form-control-static bordered-text">
                @(Model.CheckInBooking.HasValue
                    ? Model.CheckInBooking.Value.ToString("dd/MM/yyyy hh:mm tt")
                    : "Chưa có thông tin")
            </p>
        </div>

        <div class="form-group mb-3">
            <label class="control-label1">Ngày nhận thực tế</label>
            <input
                type="text"
                id="checkInRealityPicker"
                class="form-control"
                placeholder="Chọn thời gian Check-In"
                value="@(Model.CheckInReality.HasValue ? Model.CheckInReality.Value.ToString("dd/MM/yyyy hh:mm tt") : "")">
        </div>

        <div class="form-group mb-3">
            <label class="control-label1">Phụ thu</label>
            <p class="form-control-static bordered-text">@Model.ExtraPrice.ToString("N0")</p>
        </div>
    </div>

    <div class="col-md-4">
        <div class="form-group mb-3">
            <label class="control-label1">Giá tiền / đêm</label>
            <p class="form-control-static bordered-text">@Model.Price?.ToString("N0")</p>
        </div>

        <div class="form-group mb-3">
            <label class="control-label1">Ngày trả</label>
            <p class="form-control-static bordered-text">
                @(Model.CheckOutBooking.HasValue
                    ? Model.CheckOutBooking.Value.ToString("dd/MM/yyyy hh:mm tt")
                    : "Chưa có thông tin")
            </p>
        </div>

        <div class="form-group mb-3">
            <label class="control-label1">Ngày trả thực tế</label>
            <input
                type="text"
                id="checkOutRealityPicker"
                class="form-control"
                placeholder="Chọn thời gian Check-Out"
                value="@(Model.CheckOutReality.HasValue ? Model.CheckOutReality.Value.ToString("dd/MM/yyyy hh:mm tt") : "")">
        </div>

        <div class="form-group mb-3">
            <label class="control-label1">Phí hư tổn</label>
            <input id="Expenses" name="Expenses" class="form-control-static bordered-text" 
                   min="0" step="1000" placeholder="Nhập phí hư tổn"
                   value="@Model.Expenses?.ToString("N0")" oninput="validateExpenses()" />
        </div>
    </div>

    <div class="col-md-4">
        <div class="form-group mb-3">
            <label class="control-label1">Trạng thái</label>
            <p class="form-control-static bordered-text">@StatusHelper.DisplayStatusBadge(Model.Status)</p>
        </div>

        <div class="form-group mb-3">
            <label class="control-label1">Số đêm ở</label>
            <p class="form-control-static bordered-text">@Model.NumberOfNight</p>
        </div>

        <div class="form-group mb-3">
            <label class="control-label1">Tổng tiền phòng</label>
            <p class="form-control-static bordered-text">@Model.TotalRoomPrice?.ToString("N0")</p>
        </div>

        <div class="form-group mb-3">
            <label class="control-label1" for="Note">Ghi chú</label>
            <textarea id="Note" name="Note" class="form-control" rows="3" placeholder="Nhập ghi chú">@Model.Note</textarea>
        </div>

    </div>

    <div class="form-group mb-3">
        <button id="btnUpdate" class="btn btn-warning"
                data-room-booking-detail-id="@Model.Id">
            Cập nhật
        </button>
    </div>
</div>


@section scripts {
    <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>
    <script asp-append-version="true" src="~/modules/RoomBookingDetail1.js"></script>

    <!-- Thêm Flatpickr CSS -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/flatpickr/dist/flatpickr.min.css">

    <!-- Thêm Flatpickr JS -->
    <script src="https://cdn.jsdelivr.net/npm/flatpickr"></script>
}

<style>
    .bordered-text {
        border: 1px solid #ccc;
        padding: 10px;
        border-radius: 5px;
        background-color: #f9f9f9;
    }
    /*.ui-datepicker {*/
    /*    z-index: 9999 !important;*/
    /*    width: auto;*/
    /*}*/
</style>